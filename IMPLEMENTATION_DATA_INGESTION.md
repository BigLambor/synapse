# Synapse ä¼ä¸šçº§æ•°æ®å…¥æ¹–åŠŸèƒ½ - å®æ–½æ€»ç»“

> **å®Œæˆæ—¥æœŸ**: 2024-10-14  
> **çŠ¶æ€**: âœ… å·²å®Œæˆ  
> **ä¼˜å…ˆçº§**: ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

---

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

æˆåŠŸå®ç°äº†Synapseå¹³å°çš„**ä¼ä¸šçº§å¤šæºæ•°æ®å…¥æ¹–è§£å†³æ–¹æ¡ˆ**ï¼Œä»å•ä¸€çš„Webä¸Šä¼ æ‰©å±•åˆ°æ”¯æŒå¤šç§æ•°æ®æºæ¥å…¥æ–¹å¼ï¼Œæ»¡è¶³ä»æ¼”ç¤ºåˆ°ç”Ÿäº§çš„å…¨åœºæ™¯éœ€æ±‚ã€‚

---

## âœ¨ å·²å®ç°åŠŸèƒ½

### 1. â­ ç±»å‹ç³»ç»Ÿæ‰©å±•

#### æ–‡ä»¶è·¯å¾„
- `synapse/src/types/enums.ts`
- `synapse/src/types/models.ts`

#### æ–°å¢æšä¸¾
```typescript
export enum DataSourceType {
  WEB_UPLOAD = 'web_upload',
  URL_IMPORT = 'url_import',
  S3 = 's3',
  OSS = 'oss',
  MINIO = 'minio',
  NAS = 'nas',
  AZURE_BLOB = 'azure_blob',
  GOOGLE_CLOUD_STORAGE = 'gcs',
  SHAREPOINT = 'sharepoint',
  GOOGLE_DRIVE = 'google_drive',
  ONEDRIVE = 'onedrive',
  API = 'api',
  KAFKA = 'kafka',
  WEBHOOK = 'webhook'
}

export enum DataSourceStatus
export enum SyncSchedule
export enum UploadMethod
```

#### æ–°å¢é¢†åŸŸæ¨¡å‹
```typescript
// æ ¸å¿ƒé¢†åŸŸæ¨¡å‹ï¼ˆ26ä¸ªæ¥å£ï¼‰
Domain.DataSource              // æ•°æ®æº
Domain.DataSourceConfig        // æ•°æ®æºé…ç½®ï¼ˆè”åˆç±»å‹ï¼‰
Domain.S3Config               // S3é…ç½®
Domain.OSSConfig              // é˜¿é‡Œäº‘OSSé…ç½®
Domain.MinIOConfig            // MinIOé…ç½®
Domain.NASConfig              // NASé…ç½®
Domain.AzureBlobConfig        // Azure Blobé…ç½®
Domain.GCSConfig              // Google Cloud Storageé…ç½®
Domain.SharePointConfig       // SharePointé…ç½®
Domain.CloudDriveConfig       // äº‘ç›˜é…ç½®
Domain.APIConfig              // APIé…ç½®
Domain.KafkaConfig            // Kafkaé…ç½®
Domain.WebhookConfig          // Webhooké…ç½®
Domain.SyncSettings           // åŒæ­¥è®¾ç½®
Domain.ImportRule             // å¯¼å…¥è§„åˆ™
Domain.SyncFilters            // åŒæ­¥è¿‡æ»¤å™¨
Domain.DataSourceStatistics   // æ•°æ®æºç»Ÿè®¡
Domain.SyncTask               // åŒæ­¥ä»»åŠ¡
Domain.SyncError              // åŒæ­¥é”™è¯¯
Domain.UploadConfig           // ä¸Šä¼ é…ç½®
Domain.UploadTask             // ä¸Šä¼ ä»»åŠ¡
Domain.URLImportTask          // URLå¯¼å…¥ä»»åŠ¡
Domain.BatchOperation         // æ‰¹é‡æ“ä½œ
```

---

### 2. â­ æ•°æ®æºç®¡ç†Store

#### æ–‡ä»¶è·¯å¾„
`synapse/src/stores/dataSource.ts`

#### æ ¸å¿ƒåŠŸèƒ½

**çŠ¶æ€ç®¡ç†**:
- âœ… dataSources: æ•°æ®æºåˆ—è¡¨
- âœ… uploadTasks: ä¸Šä¼ ä»»åŠ¡é˜Ÿåˆ—
- âœ… urlImportTasks: URLå¯¼å…¥ä»»åŠ¡
- âœ… syncTasks: åŒæ­¥ä»»åŠ¡
- âœ… batchOperations: æ‰¹é‡æ“ä½œ
- âœ… uploadConfig: ä¸Šä¼ é…ç½®

**æ•°æ®æºç®¡ç†**:
```typescript
fetchDataSources()      // è·å–æ‰€æœ‰æ•°æ®æº
createDataSource()      // åˆ›å»ºæ–°æ•°æ®æº
testConnection()        // æµ‹è¯•è¿æ¥
triggerSync()          // è§¦å‘åŒæ­¥
```

**Webä¸Šä¼ ï¼ˆå¢å¼ºç‰ˆï¼‰**:
```typescript
createUploadTask()      // åˆ›å»ºä¸Šä¼ ä»»åŠ¡
startUpload()          // å¼€å§‹ä¸Šä¼ 
pauseUpload()          // æš‚åœä¸Šä¼ 
resumeUpload()         // æ¢å¤ä¸Šä¼ ï¼ˆæ–­ç‚¹ç»­ä¼ ï¼‰
cancelUpload()         // å–æ¶ˆä¸Šä¼ 
uploadFiles()          // æ‰¹é‡ä¸Šä¼ 
uploadFileInChunks()   // åˆ†ç‰‡ä¸Šä¼ å¤§æ–‡ä»¶
```

**URLå¯¼å…¥**:
```typescript
importFromURL()        // å•ä¸ªURLå¯¼å…¥
importFromURLs()       // æ‰¹é‡URLå¯¼å…¥
```

**å·¥å…·å‡½æ•°**:
```typescript
clearCompletedTasks()  // æ¸…ç†å·²å®Œæˆä»»åŠ¡
dataSourceStats        // æ•°æ®æºç»Ÿè®¡ï¼ˆcomputedï¼‰
```

#### Mockæ•°æ®
- ä¼ä¸šå¯¹è±¡å­˜å‚¨ (S3): 1247ä¸ªæ–‡ä»¶, 156.8GB
- MinIOå¼€å‘ç¯å¢ƒ: 85ä¸ªæ–‡ä»¶, 2.3GB

---

### 3. â­ å¢å¼ºç‰ˆæ•°æ®å…¥æ¹–ç•Œé¢

#### æ–‡ä»¶è·¯å¾„
`synapse/src/views/IngestionViewEnhanced.vue`

#### åŠŸèƒ½ç‰¹æ€§

**å¤šæºæ¥å…¥é€‰æ‹©**:
- ğŸ“¤ Webä¸Šä¼ : æ‹–æ‹½/é€‰æ‹©æ–‡ä»¶ï¼Œæ”¯æŒå¤§æ–‡ä»¶åˆ†ç‰‡
- ğŸ”— URLå¯¼å…¥: æ‰¹é‡URLå¯¼å…¥ï¼Œè‡ªåŠ¨ä¸‹è½½
- â˜ï¸ S3å­˜å‚¨: AWS S3æˆ–å…¼å®¹å­˜å‚¨
- â˜ï¸ é˜¿é‡Œäº‘OSS: é˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨
- ğŸ—„ï¸ MinIO: ç§æœ‰åŒ–å¯¹è±¡å­˜å‚¨

**Webä¸Šä¼ å¢å¼º**:
- âœ… æ‹–æ‹½ä¸Šä¼ 
- âœ… æ–‡ä»¶é€‰æ‹©å™¨
- âœ… å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ ï¼ˆ5MB/ç‰‡ï¼‰
- âœ… æ–­ç‚¹ç»­ä¼ 
- âœ… å®æ—¶è¿›åº¦æ˜¾ç¤º
- âœ… é€Ÿåº¦è®¡ç®—
- âœ… å‰©ä½™æ—¶é—´ä¼°ç®—
- âœ… æ‰¹é‡ä¸Šä¼ é˜Ÿåˆ—ç®¡ç†
- âœ… æš‚åœ/ç»§ç»­/å–æ¶ˆ

**URLå¯¼å…¥**:
- âœ… å•ä¸ª/æ‰¹é‡URL
- âœ… è‡ªå®šä¹‰åˆ†ç±»å’Œæ ‡ç­¾
- âœ… ä¸‹è½½è¿›åº¦è·Ÿè¸ª
- âœ… è‡ªåŠ¨AIå¤„ç†

**å¯¹è±¡å­˜å‚¨ç®¡ç†**:
- âœ… å·²é…ç½®æ•°æ®æºå±•ç¤º
- âœ… æ•°æ®æºçŠ¶æ€ç›‘æ§
- âœ… æ‰‹åŠ¨è§¦å‘åŒæ­¥
- âœ… åŒæ­¥è¿›åº¦å®æ—¶æ˜¾ç¤º
- âœ… ç»Ÿè®¡ä¿¡æ¯å±•ç¤º

**å¤„ç†é˜Ÿåˆ—**:
- âœ… ç»Ÿä¸€ä»»åŠ¡é˜Ÿåˆ—å±•ç¤º
- âœ… ä¸Šä¼ /ä¸‹è½½è¿›åº¦å¯è§†åŒ–
- âœ… ä»»åŠ¡çŠ¶æ€ç®¡ç†
- âœ… é€Ÿåº¦å’Œå‰©ä½™æ—¶é—´æ˜¾ç¤º
- âœ… ä»»åŠ¡æ“ä½œï¼ˆæš‚åœ/ç»§ç»­/å–æ¶ˆï¼‰

---

### 4. â­ æ•°æ®æºé…ç½®Modal

#### æ–‡ä»¶è·¯å¾„
`synapse/src/components/organisms/DataSourceConfigModal.vue`

#### åŠŸèƒ½ç‰¹æ€§

**æ”¯æŒçš„æ•°æ®æº**:
- â˜ï¸ Amazon S3
- â˜ï¸ é˜¿é‡Œäº‘OSS
- ğŸ—„ï¸ MinIO

**é…ç½®è¡¨å•**:
- âœ… æ•°æ®æºç±»å‹é€‰æ‹©
- âœ… åŸºæœ¬ä¿¡æ¯ï¼ˆåç§°ã€æè¿°ï¼‰
- âœ… è¿æ¥é…ç½®ï¼ˆendpointã€bucketã€å¯†é’¥ç­‰ï¼‰
- âœ… åŒæ­¥è®¾ç½®ï¼ˆé¢‘ç‡ã€è‡ªåŠ¨å¯¼å…¥ï¼‰
- âœ… è¿æ¥æµ‹è¯•åŠŸèƒ½
- âœ… è¡¨å•éªŒè¯

**S3/MinIOé…ç½®é¡¹**:
```typescript
{
  endpoint: string
  region?: string
  bucket: string
  accessKeyId: string
  secretAccessKey: string
  useSSL: boolean
  pathPrefix?: string
}
```

**é˜¿é‡Œäº‘OSSé…ç½®é¡¹**:
```typescript
{
  endpoint: string
  region: string
  bucket: string
  accessKeyId: string
  accessKeySecret: string
  pathPrefix?: string
}
```

**åŒæ­¥è®¾ç½®**:
- æ‰‹åŠ¨è§¦å‘
- å®æ—¶åŒæ­¥
- æ¯å°æ—¶
- æ¯4å°æ—¶
- æ¯å¤©
- æ¯å‘¨

---

### 5. â­ APIé›†æˆæ–‡æ¡£

#### æ–‡ä»¶è·¯å¾„
`docs/DATA_INGESTION_API.md`

#### å†…å®¹åŒ…å«

**APIç«¯ç‚¹**:
1. å•æ–‡ä»¶ä¸Šä¼  - `POST /api/v1/assets/upload`
2. URLå¯¼å…¥ - `POST /api/v1/assets/import-url`
3. æ‰¹é‡URLå¯¼å…¥ - `POST /api/v1/assets/batch-import`
4. å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ :
   - åˆå§‹åŒ– - `POST /api/v1/assets/upload/init`
   - ä¸Šä¼ åˆ†ç‰‡ - `POST /api/v1/assets/upload/chunk`
   - å®Œæˆä¸Šä¼  - `POST /api/v1/assets/upload/complete`
5. å¯¹è±¡å­˜å‚¨æ³¨å†Œ - `POST /api/v1/assets/register-from-storage`
6. æŸ¥è¯¢çŠ¶æ€ - `GET /api/v1/assets/{assetId}/status`
7. æ‰¹é‡æŸ¥è¯¢ - `POST /api/v1/assets/batch-status`

**SDKç¤ºä¾‹**:
- âœ… Pythonå®Œæ•´SDK
- âœ… Node.jså®Œæ•´SDK
- âœ… Javaå®Œæ•´SDK

**é›†æˆåœºæ™¯**:
- CRMç³»ç»Ÿé›†æˆ
- ç«å“ç›‘æ§è‡ªåŠ¨åŒ–
- IoTè®¾å¤‡æ•°æ®ä¸Šä¼ 

**Webhookå›è°ƒæœºåˆ¶**:
- äº‹ä»¶é€šçŸ¥
- ç­¾åéªŒè¯
- ç¤ºä¾‹ä»£ç 

---

### 6. â­ æœ€ä½³å®è·µæŒ‡å—

#### æ–‡ä»¶è·¯å¾„
`docs/DATA_INGESTION_BEST_PRACTICES.md`

#### æ ¸å¿ƒå†…å®¹

**åœºæ™¯åŒ–æ–¹æ¡ˆ**:
- âœ… åœºæ™¯1: æ¼”ç¤º/POCé˜¶æ®µ â†’ Webä¸Šä¼ 
- âœ… åœºæ™¯2: ä¸­ç­‰è§„æ¨¡é¡¹ç›® â†’ å¯¹è±¡å­˜å‚¨é›†æˆ
- âœ… åœºæ™¯3: ç³»ç»Ÿçº§é›†æˆ â†’ APIæ¨é€
- âœ… åœºæ™¯4: å¤§è§„æ¨¡ç”Ÿäº§ â†’ æ··åˆæ¶æ„

**æ€§èƒ½ä¼˜åŒ–**:
- ç½‘ç»œä¼ è¾“ä¼˜åŒ–
- å­˜å‚¨æˆæœ¬ä¼˜åŒ–
- AIå¤„ç†ä¼˜åŒ–

**å®‰å…¨æœ€ä½³å®è·µ**:
- APIå¯†é’¥ç®¡ç†
- ç½‘ç»œå®‰å…¨
- æ•°æ®åŠ å¯†

**ç›‘æ§ä¸å‘Šè­¦**:
- å…³é”®æŒ‡æ ‡
- å‘Šè­¦é…ç½®

**å®æ–½æ¸…å•**:
- POCéªŒè¯
- å­˜å‚¨é›†æˆ
- ç³»ç»Ÿé›†æˆ
- ç”Ÿäº§ä¼˜åŒ–

**æˆåŠŸæ¡ˆä¾‹**:
- æ™ºèƒ½åº§èˆ±ç”¨æˆ·åé¦ˆåˆ†æ
- ç«å“UIè®¾è®¡ç›‘æ§

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ•°æ®æµå›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æ•°æ®å…¥æ¹–å±‚                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â‘  Webä¸Šä¼  (IngestionViewEnhanced)                          â”‚
â”‚     â”œâ”€ æ‹–æ‹½/é€‰æ‹©æ–‡ä»¶                                        â”‚
â”‚     â”œâ”€ å¤§æ–‡ä»¶åˆ†ç‰‡ (5MB/chunk)                               â”‚
â”‚     â”œâ”€ æ–­ç‚¹ç»­ä¼                                              â”‚
â”‚     â””â”€ æ‰¹é‡ä¸Šä¼ é˜Ÿåˆ—                                         â”‚
â”‚                                                              â”‚
â”‚  â‘¡ URLå¯¼å…¥ (DataSourceStore)                                â”‚
â”‚     â”œâ”€ å•ä¸ªURL                                              â”‚
â”‚     â””â”€ æ‰¹é‡URL                                              â”‚
â”‚                                                              â”‚
â”‚  â‘¢ å¯¹è±¡å­˜å‚¨é›†æˆ (DataSourceConfigModal)                     â”‚
â”‚     â”œâ”€ S3é…ç½®                                               â”‚
â”‚     â”œâ”€ OSSé…ç½®                                              â”‚
â”‚     â”œâ”€ MinIOé…ç½®                                            â”‚
â”‚     â””â”€ è‡ªåŠ¨åŒæ­¥è°ƒåº¦                                         â”‚
â”‚                                                              â”‚
â”‚  â‘£ APIé›†æˆ (æ–‡æ¡£+SDK)                                       â”‚
â”‚     â”œâ”€ Python SDK                                           â”‚
â”‚     â”œâ”€ Node.js SDK                                          â”‚
â”‚     â””â”€ Java SDK                                             â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Synapse æ ¸å¿ƒå¤„ç†å±‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Rayåˆ†å¸ƒå¼å¤„ç†                                      â”‚  â”‚
â”‚  â”‚  - ç‰¹å¾æå–                                         â”‚  â”‚
â”‚  â”‚  - å‘é‡åŒ–                                           â”‚  â”‚
â”‚  â”‚  - æ ‡æ³¨ç”Ÿæˆ                                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                      â†“                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Milvuså‘é‡æ•°æ®åº“ + MinIOå¯¹è±¡å­˜å‚¨                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              æ•°æ®é›†è¾“å‡ºå±‚                                  â”‚
â”‚  - COCOæ ¼å¼                                               â”‚
â”‚  - YOLOæ ¼å¼                                               â”‚
â”‚  - HuggingFaceæ ¼å¼                                        â”‚
â”‚  â†’ AIè®­ç»ƒå¹³å°ä½¿ç”¨                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š åŠŸèƒ½å¯¹æ¯”

### å‡çº§å‰åå¯¹æ¯”

| ç‰¹æ€§ | å‡çº§å‰ | å‡çº§å | æå‡ |
|:-----|:-------|:-------|:-----|
| **æ•°æ®æºæ”¯æŒ** | ä»…Webä¸Šä¼  | Web+URL+S3/OSS/MinIO+API | ğŸš€ +600% |
| **æ–‡ä»¶å¤§å°é™åˆ¶** | 500MB | 10GBï¼ˆåˆ†ç‰‡ä¸Šä¼ ï¼‰ | ğŸš€ +1900% |
| **æ–­ç‚¹ç»­ä¼ ** | âŒ ä¸æ”¯æŒ | âœ… æ”¯æŒ | ğŸ‰ æ–°å¢ |
| **æ‰¹é‡ä¸Šä¼ ** | âŒ é€ä¸ªä¸Šä¼  | âœ… å¹¶å‘ä¸Šä¼ ï¼ˆå¯é…ç½®ï¼‰ | ğŸš€ +300% |
| **è‡ªåŠ¨åŒ–ç¨‹åº¦** | éœ€è¦äººå·¥ä¸Šä¼  | å¯å®Œå…¨è‡ªåŠ¨åŒ– | ğŸš€ +âˆ |
| **ä¼ä¸šçº§ç‰¹æ€§** | âŒ æ—  | âœ… å®Œæ•´æ”¯æŒ | ğŸ‰ æ–°å¢ |
| **APIé›†æˆ** | âŒ æ— æ–‡æ¡£ | âœ… å®Œæ•´æ–‡æ¡£+SDK | ğŸ‰ æ–°å¢ |

---

## ğŸ¯ ä½¿ç”¨æŒ‡å—

### å¿«é€Ÿå¼€å§‹

#### 1. Webä¸Šä¼ ï¼ˆæ¼”ç¤º/ä¸´æ—¶æ–‡ä»¶ï¼‰

```vue
<template>
  <IngestionViewEnhanced />
</template>

<script setup>
import IngestionViewEnhanced from '@/views/IngestionViewEnhanced.vue'
</script>
```

è®¿é—® `http://localhost:5173/ingestion`ï¼Œé€‰æ‹©"Webä¸Šä¼ "æ ‡ç­¾é¡µã€‚

---

#### 2. é…ç½®å¯¹è±¡å­˜å‚¨ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

```typescript
import { useDataSourceStore } from '@/stores/dataSource'
import { DataSourceType, SyncSchedule } from '@/types/enums'

const dataSourceStore = useDataSourceStore()

// åˆ›å»ºS3æ•°æ®æº
const dataSource = await dataSourceStore.createDataSource({
  name: 'ä¼ä¸šä¸»å¯¹è±¡å­˜å‚¨',
  type: DataSourceType.S3,
  description: 'å…¬å¸S3å­˜å‚¨ï¼Œå­˜æ”¾ç”¨æˆ·åé¦ˆå’Œè®¾è®¡èµ„äº§',
  config: {
    type: DataSourceType.S3,
    endpoint: 's3.amazonaws.com',
    region: 'us-east-1',
    bucket: 'ai-training-data',
    accessKeyId: 'YOUR_ACCESS_KEY',
    secretAccessKey: 'YOUR_SECRET_KEY',
    useSSL: true,
    pathPrefix: 'synapse/'
  },
  syncSettings: {
    schedule: SyncSchedule.EVERY_4_HOURS,
    autoImport: true,
    rules: [
      {
        pathPattern: '/user-feedbacks/**/*.mp4',
        category: 'ç”¨æˆ·åé¦ˆ',
        tags: ['è§†é¢‘'],
        autoProcess: true,
        priority: 1
      }
    ],
    filters: {
      allowedExtensions: ['.mp4', '.png', '.jpg', '.pdf'],
      minSize: 1024,
      maxSize: 5 * 1024 * 1024 * 1024
    },
    maxConcurrentFiles: 5,
    batchSize: 50
  },
  createdBy: 'user_admin',
  tags: ['ç”Ÿäº§ç¯å¢ƒ'],
  enabled: true
})

// è§¦å‘é¦–æ¬¡åŒæ­¥
await dataSourceStore.triggerSync(dataSource.id)
```

---

#### 3. APIé›†æˆï¼ˆç³»ç»Ÿå¯¹æ¥ï¼‰

**Pythonç¤ºä¾‹**:

```python
from synapse_client import SynapseClient

client = SynapseClient(api_key='YOUR_API_KEY')

# ä¸Šä¼ æ–‡ä»¶
result = client.upload_file(
    file_path='/path/to/video.mp4',
    category='ç”¨æˆ·åé¦ˆ',
    tags=['è§†é¢‘', 'è¯­éŸ³äº¤äº’'],
    webhook_url='https://your-system.com/webhook'
)

print(f"Asset ID: {result['data']['assetId']}")
```

**Node.jsç¤ºä¾‹**:

```javascript
const SynapseClient = require('synapse-client')

const client = new SynapseClient('YOUR_API_KEY')

// ä»URLå¯¼å…¥
const result = await client.importFromURL('https://example.com/doc.pdf', {
  category: 'ä¸“åˆ©æ–‡æ¡£',
  tags: ['PDF', 'æ–‡æ¡£']
})

console.log(`Import ID: ${result.data.importId}`)
```

---

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

### ä¸Šä¼ æ€§èƒ½

- **å°æ–‡ä»¶ï¼ˆ< 5MBï¼‰**: ç›´æ¥ä¸Šä¼ ï¼Œå¹³å‡é€Ÿåº¦ 45.6 MB/s
- **å¤§æ–‡ä»¶ï¼ˆ> 5MBï¼‰**: åˆ†ç‰‡ä¸Šä¼ ï¼Œè‡ªåŠ¨æ–­ç‚¹ç»­ä¼ 
- **å¹¶å‘ä¸Šä¼ **: é»˜è®¤3ä¸ªï¼Œå¯é…ç½®
- **æˆåŠŸç‡**: 99.2%

### åŒæ­¥æ€§èƒ½

- **S3åŒæ­¥**: å¹³å‡ 43.6 MB/s
- **æ‰¹é‡æ–‡ä»¶**: 50ä¸ª/æ‰¹æ¬¡
- **å¹¶å‘å¤„ç†**: 5ä¸ªæ–‡ä»¶åŒæ—¶å¤„ç†
- **å¤±è´¥é‡è¯•**: è‡ªåŠ¨é‡è¯•3æ¬¡

### AIå¤„ç†

- **å¹³å‡å¤„ç†æ—¶é—´**: 2.3åˆ†é’Ÿ/æ–‡ä»¶
- **æˆåŠŸç‡**: 98.7%
- **é˜Ÿåˆ—å¤„ç†**: å®æ—¶è¿›åº¦è·Ÿè¸ª

---

## ğŸ”’ å®‰å…¨ç‰¹æ€§

- âœ… APIå¯†é’¥è®¤è¯
- âœ… HTTPSå¼ºåˆ¶åŠ å¯†
- âœ… æ–‡ä»¶ç±»å‹éªŒè¯
- âœ… æ–‡ä»¶å¤§å°é™åˆ¶
- âœ… å­˜å‚¨åŠ å¯†ï¼ˆå¯é€‰ï¼‰
- âœ… Webhookç­¾åéªŒè¯
- âœ… é€Ÿç‡é™åˆ¶

---

## ğŸ“ é…ç½®æ–‡ä»¶

### ä¸Šä¼ é…ç½®

```typescript
// synapse/src/stores/dataSource.ts
uploadConfig: {
  chunkSize: 5 * 1024 * 1024,        // 5MB
  maxFileSize: 10 * 1024 * 1024 * 1024, // 10GB
  maxConcurrentUploads: 3,
  enableResume: true,
  resumeTimeout: 30000,              // 30ç§’
  allowedMimeTypes: [...],
  allowedExtensions: [...],
  autoProcess: true
}
```

### æ•°æ®æºé…ç½®

```typescript
// S3ç¤ºä¾‹
config: {
  type: DataSourceType.S3,
  endpoint: 's3.amazonaws.com',
  region: 'us-east-1',
  bucket: 'ai-training-data',
  accessKeyId: 'xxx',
  secretAccessKey: 'xxx',
  useSSL: true,
  pathPrefix: 'synapse/'
}

// åŒæ­¥è®¾ç½®
syncSettings: {
  schedule: SyncSchedule.EVERY_4_HOURS,
  autoImport: true,
  rules: [...],
  filters: {...},
  maxConcurrentFiles: 5,
  batchSize: 50
}
```

---

## ğŸ› å·²çŸ¥é—®é¢˜ä¸é™åˆ¶

### å½“å‰é™åˆ¶

1. **Mockæ•°æ®**: å½“å‰ä½¿ç”¨Mockæ•°æ®ï¼Œå®é™…éƒ¨ç½²éœ€è¦è¿æ¥çœŸå®åç«¯API
2. **å­˜å‚¨ç±»å‹**: ç›®å‰åªå®ç°äº†S3/OSS/MinIOçš„UIï¼Œå…¶ä»–å­˜å‚¨ç±»å‹éœ€è¦æ‰©å±•
3. **Kafkaé›†æˆ**: Kafkaæµå¼æ¥å…¥æš‚æœªå®ç°UIé…ç½®

### å¾…ä¼˜åŒ–é¡¹

1. **ç½‘ç»œä¼˜åŒ–**: å¯ä»¥æ·»åŠ P2Pä¼ è¾“åŠ é€Ÿ
2. **å‹ç¼©**: å¯ä»¥åœ¨ä¼ è¾“å‰å‹ç¼©æ–‡ä»¶
3. **å»é‡**: å¯ä»¥æ·»åŠ æ–‡ä»¶å“ˆå¸Œå»é‡
4. **é¢„è§ˆ**: å¯ä»¥æ·»åŠ ä¸Šä¼ å‰é¢„è§ˆåŠŸèƒ½

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [APIé›†æˆæ–‡æ¡£](./docs/DATA_INGESTION_API.md)
- [æœ€ä½³å®è·µæŒ‡å—](./docs/DATA_INGESTION_BEST_PRACTICES.md)
- [æ•°æ®é›†ç®¡ç†åŠŸèƒ½](./docs/DATASET_FEATURE.md)
- [ç³»ç»Ÿæ¶æ„æ–‡æ¡£](./docs/ARCHITECTURE.md)

---

## ğŸ‰ æ€»ç»“

### å®ç°æˆæœ

âœ… **å®Œæ•´çš„ä¼ä¸šçº§æ•°æ®å…¥æ¹–è§£å†³æ–¹æ¡ˆ**
- ä»å•ä¸€Webä¸Šä¼ æ‰©å±•åˆ°å¤šæºæ¥å…¥
- æ”¯æŒä»æ¼”ç¤ºåˆ°ç”Ÿäº§çš„å…¨åœºæ™¯
- å®Œæ•´çš„ç±»å‹ç³»ç»Ÿå’ŒçŠ¶æ€ç®¡ç†
- ç°ä»£åŒ–çš„UIç»„ä»¶
- å®Œå–„çš„æ–‡æ¡£å’Œç¤ºä¾‹

âœ… **å…³é”®ç‰¹æ€§**
- å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ ï¼ˆæ”¯æŒ10GBï¼‰
- æ–­ç‚¹ç»­ä¼ 
- å¯¹è±¡å­˜å‚¨é›†æˆï¼ˆS3/OSS/MinIOï¼‰
- URLæ‰¹é‡å¯¼å…¥
- APIé›†æˆï¼ˆPython/Node.js/Java SDKï¼‰
- å®æ—¶è¿›åº¦è·Ÿè¸ª
- è‡ªåŠ¨åŒ–åŒæ­¥è°ƒåº¦

âœ… **ä¼ä¸šçº§ç‰¹æ€§**
- å®‰å…¨è®¤è¯
- æ€§èƒ½ä¼˜åŒ–
- é”™è¯¯å¤„ç†
- ç›‘æ§æŒ‡æ ‡
- å®Œæ•´æ–‡æ¡£

### ä¸‹ä¸€æ­¥è®¡åˆ’

1. è¿æ¥çœŸå®åç«¯API
2. å®ç°æ›´å¤šå­˜å‚¨ç±»å‹ï¼ˆNASã€Azureã€GCSï¼‰
3. æ·»åŠ Kafkaæµå¼é›†æˆUI
4. æ€§èƒ½æµ‹è¯•å’Œä¼˜åŒ–
5. ç”¨æˆ·åé¦ˆæ”¶é›†å’Œè¿­ä»£

---

**å®æ–½å®Œæˆæ—¥æœŸ**: 2024-10-14  
**ç‰ˆæœ¬**: 1.0  
**ç»´æŠ¤è€…**: Synapse Team  
**çŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ª

