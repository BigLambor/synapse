<template>
  <AppCard variant="elevated">
    <template #header>
      <div>
        <h2 class="text-xl font-semibold mb-1">ğŸ—„ï¸ å‘é‡æ•°æ®åº“å­˜å‚¨æ¶æ„</h2>
        <p class="text-sm text-neutral-400">åŸå§‹æ•°æ® + ç‰¹å¾å‘é‡ + å…ƒæ•°æ®çš„ååŒå­˜å‚¨æ–¹æ¡ˆ</p>
      </div>
    </template>

    <div class="space-y-6">
      <!-- å­˜å‚¨æ¶æ„å›¾ -->
      <div class="bg-neutral-900/50 rounded-lg p-6 border border-neutral-800">
        <h3 class="text-sm font-semibold mb-4 flex items-center gap-2">
          <span>ğŸ—ï¸</span>
          <span>ä¸‰å±‚å­˜å‚¨æ¶æ„</span>
        </h3>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
          <!-- 1. å¯¹è±¡å­˜å‚¨ -->
          <div class="relative">
            <div class="bg-gradient-to-br from-blue-500/20 to-blue-600/20 rounded-lg p-4 border-2 border-blue-500/50">
              <div class="text-3xl mb-2">ğŸ“¦</div>
              <h4 class="font-semibold mb-2">å¯¹è±¡å­˜å‚¨å±‚</h4>
              <div class="text-xs text-neutral-300 space-y-1 mb-3">
                <div>â€¢ S3 / OSS / MinIO</div>
                <div>â€¢ å­˜å‚¨åŸå§‹æ–‡ä»¶</div>
                <div>â€¢ æ”¯æŒå¤§æ–‡ä»¶</div>
                <div>â€¢ æŒ‰éœ€åŠ è½½</div>
              </div>
              <AppBadge size="sm" variant="info">åŸå§‹æ•°æ®</AppBadge>
            </div>
          </div>

          <!-- 2. å‘é‡æ•°æ®åº“ -->
          <div class="relative">
            <div class="bg-gradient-to-br from-purple-500/20 to-purple-600/20 rounded-lg p-4 border-2 border-purple-500/50">
              <div class="text-3xl mb-2">ğŸ§¬</div>
              <h4 class="font-semibold mb-2">å‘é‡æ•°æ®åº“å±‚</h4>
              <div class="text-xs text-neutral-300 space-y-1 mb-3">
                <div>â€¢ Milvus / Qdrant</div>
                <div>â€¢ å­˜å‚¨ç‰¹å¾å‘é‡</div>
                <div>â€¢ HNSWç´¢å¼•</div>
                <div>â€¢ å¿«é€Ÿç›¸ä¼¼æœç´¢</div>
              </div>
              <AppBadge size="sm" variant="info">ç‰¹å¾å‘é‡</AppBadge>
            </div>
          </div>

          <!-- 3. å…ƒæ•°æ®æ•°æ®åº“ -->
          <div class="relative">
            <div class="bg-gradient-to-br from-green-500/20 to-green-600/20 rounded-lg p-4 border-2 border-green-500/50">
              <div class="text-3xl mb-2">ğŸ“Š</div>
              <h4 class="font-semibold mb-2">å…ƒæ•°æ®æ•°æ®åº“å±‚</h4>
              <div class="text-xs text-neutral-300 space-y-1 mb-3">
                <div>â€¢ PostgreSQL/Mysql(Gravitino)</div>
                <div>â€¢ å­˜å‚¨ä¸šåŠ¡ä¿¡æ¯</div>
                <div>â€¢ å…³ç³»å‹æŸ¥è¯¢</div>
                <div>â€¢ äº‹åŠ¡æ”¯æŒ</div>
              </div>
              <AppBadge size="sm" variant="info">ç»“æ„åŒ–æ•°æ®</AppBadge>
            </div>
          </div>
        </div>

        <!-- å…³è”å…³ç³» -->
        <div class="mt-6 bg-neutral-950/50 rounded-lg p-4">
          <div class="flex items-center justify-center gap-3 text-xs">
            <span class="text-neutral-400">é€šè¿‡</span>
            <code class="px-2 py-1 bg-primary-500/20 rounded text-primary-400 font-mono">asset_id</code>
            <span class="text-neutral-400">å…³è”ä¸‰å±‚æ•°æ®</span>
            <span class="text-secondary-400">â†’</span>
            <span class="text-neutral-300">ä¿è¯æ•°æ®ä¸€è‡´æ€§</span>
          </div>
        </div>
      </div>

      <!-- æ•°æ®ç»“æ„ç¤ºä¾‹ -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <!-- å‘é‡æ•°æ®åº“è®°å½• -->
        <div class="bg-neutral-900/50 rounded-lg p-4 border border-neutral-800">
          <h4 class="text-sm font-semibold mb-3 flex items-center gap-2">
            <span>ğŸ§¬</span>
            <span>å‘é‡æ•°æ®åº“è®°å½• (Milvus)</span>
          </h4>
          <pre class="bg-neutral-950 rounded p-3 overflow-x-auto"><code class="text-xs text-neutral-300 font-mono">{
  "id": "vec_001234",
  "asset_id": "asset_abc123",
  "vector": [
    0.0234, -0.1234, 0.5678, ...  // 768ç»´
  ],
  "modality": "document",
  "model": "bert-base-chinese",
  "created_at": "2025-10-07T10:30:00Z"
}</code></pre>
          <div class="mt-3 flex gap-2">
            <AppBadge size="sm" variant="primary">HNSWç´¢å¼•</AppBadge>
            <AppBadge size="sm" variant="primary">ä½™å¼¦è·ç¦»</AppBadge>
          </div>
        </div>

        <!-- å…ƒæ•°æ®åº“è®°å½• -->
        <div class="bg-neutral-900/50 rounded-lg p-4 border border-neutral-800">
          <h4 class="text-sm font-semibold mb-3 flex items-center gap-2">
            <span>ğŸ“Š</span>
            <span>å…ƒæ•°æ®åº“è®°å½• (PostgreSQL)</span>
          </h4>
          <pre class="bg-neutral-950 rounded p-3 overflow-x-auto"><code class="text-xs text-neutral-300 font-mono">{
  "asset_id": "asset_abc123",
  "filename": "äº§å“éœ€æ±‚æ–‡æ¡£.pdf",
  "type": "document",
  "size": 2457600,
  "s3_url": "s3://bucket/files/abc123.pdf",
  "tags": ["éœ€æ±‚", "äº§å“", "è®¾è®¡"],
  "entities": [
    {"name": "AIæŠ€æœ¯", "type": "æŠ€æœ¯"},
    {"name": "å¤šæ¨¡æ€", "type": "æ¦‚å¿µ"}
  ],
  "uploaded_by": "user_001",
  "uploaded_at": "2025-10-07T10:30:00Z"
}</code></pre>
          <div class="mt-3 flex gap-2">
            <AppBadge size="sm" variant="success">B-Treeç´¢å¼•</AppBadge>
            <AppBadge size="sm" variant="success">å…¨æ–‡æœç´¢</AppBadge>
          </div>
        </div>
      </div>

      <!-- æ··åˆæ£€ç´¢æµç¨‹ -->
      <div class="bg-neutral-900/50 rounded-lg p-4 border border-neutral-800">
        <h4 class="text-sm font-semibold mb-4 flex items-center gap-2">
          <span>ğŸ”</span>
          <span>æ··åˆæ£€ç´¢æµç¨‹ - å‘é‡ç›¸ä¼¼åº¦ + å…ƒæ•°æ®è¿‡æ»¤</span>
        </h4>
        
        <div class="space-y-3">
          <!-- æ­¥éª¤1 -->
          <div class="flex items-start gap-3">
            <div class="flex-shrink-0 w-8 h-8 rounded-full bg-primary-500/20 text-primary-400 flex items-center justify-center text-xs font-semibold">
              1
            </div>
            <div class="flex-1 bg-neutral-950/50 rounded-lg p-3">
              <div class="font-medium text-sm mb-2">ç”¨æˆ·æŸ¥è¯¢</div>
              <div class="bg-neutral-900 rounded px-3 py-2 text-xs font-mono text-neutral-300">
                "æ‰¾ä¸€ä¸‹å…³äºAIæŠ€æœ¯çš„äº§å“æ–‡æ¡£ï¼Œæœ€è¿‘ä¸€ä¸ªæœˆä¸Šä¼ çš„"
              </div>
            </div>
          </div>

          <!-- æ­¥éª¤2 -->
          <div class="flex items-start gap-3">
            <div class="flex-shrink-0 w-8 h-8 rounded-full bg-purple-500/20 text-purple-400 flex items-center justify-center text-xs font-semibold">
              2
            </div>
            <div class="flex-1 bg-neutral-950/50 rounded-lg p-3">
              <div class="font-medium text-sm mb-2">æŸ¥è¯¢å‘é‡åŒ–</div>
              <div class="bg-neutral-900 rounded px-3 py-2 text-xs font-mono text-neutral-300">
                query_vector = embed("AIæŠ€æœ¯çš„äº§å“æ–‡æ¡£")<br/>
                # ç”Ÿæˆ768ç»´æŸ¥è¯¢å‘é‡
              </div>
            </div>
          </div>

          <!-- æ­¥éª¤3 -->
          <div class="flex items-start gap-3">
            <div class="flex-shrink-0 w-8 h-8 rounded-full bg-pink-500/20 text-pink-400 flex items-center justify-center text-xs font-semibold">
              3
            </div>
            <div class="flex-1 bg-neutral-950/50 rounded-lg p-3">
              <div class="font-medium text-sm mb-2">å‘é‡ç›¸ä¼¼åº¦æœç´¢</div>
              <div class="bg-neutral-900 rounded px-3 py-2 text-xs font-mono text-neutral-300">
                results = milvus.search(<br/>
                &nbsp;&nbsp;vector=query_vector,<br/>
                &nbsp;&nbsp;top_k=100,  # å¬å›å‰100ä¸ª<br/>
                &nbsp;&nbsp;metric="cosine"<br/>
                )
              </div>
            </div>
          </div>

          <!-- æ­¥éª¤4 -->
          <div class="flex items-start gap-3">
            <div class="flex-shrink-0 w-8 h-8 rounded-full bg-green-500/20 text-green-400 flex items-center justify-center text-xs font-semibold">
              4
            </div>
            <div class="flex-1 bg-neutral-950/50 rounded-lg p-3">
              <div class="font-medium text-sm mb-2">å…ƒæ•°æ®è¿‡æ»¤</div>
              <div class="bg-neutral-900 rounded px-3 py-2 text-xs font-mono text-neutral-300">
                filtered = postgres.filter(<br/>
                &nbsp;&nbsp;asset_ids=[r.asset_id for r in results],<br/>
                &nbsp;&nbsp;type="document",<br/>
                &nbsp;&nbsp;uploaded_at > now() - 30days<br/>
                )
              </div>
            </div>
          </div>

          <!-- æ­¥éª¤5 -->
          <div class="flex items-start gap-3">
            <div class="flex-shrink-0 w-8 h-8 rounded-full bg-blue-500/20 text-blue-400 flex items-center justify-center text-xs font-semibold">
              5
            </div>
            <div class="flex-1 bg-neutral-950/50 rounded-lg p-3">
              <div class="font-medium text-sm mb-2">ç»“æœåˆå¹¶è¿”å›</div>
              <div class="bg-neutral-900 rounded px-3 py-2 text-xs text-neutral-300">
                <div class="space-y-2">
                  <div class="flex items-center justify-between">
                    <span>ğŸ“„ äº§å“éœ€æ±‚æ–‡æ¡£_v2.pdf</span>
                    <AppBadge size="sm" variant="success">ç›¸ä¼¼åº¦: 0.95</AppBadge>
                  </div>
                  <div class="flex items-center justify-between">
                    <span>ğŸ“„ AIåŠŸèƒ½è®¾è®¡æ–¹æ¡ˆ.docx</span>
                    <AppBadge size="sm" variant="success">ç›¸ä¼¼åº¦: 0.89</AppBadge>
                  </div>
                  <div class="flex items-center justify-between">
                    <span>ğŸ“„ æŠ€æœ¯æ¶æ„è¯´æ˜.pdf</span>
                    <AppBadge size="sm" variant="success">ç›¸ä¼¼åº¦: 0.87</AppBadge>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- æ€§èƒ½ä¼˜åŒ– -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="bg-gradient-to-br from-primary-500/10 to-primary-600/10 rounded-lg p-4 border border-primary-500/20">
          <div class="flex items-center gap-2 mb-3">
            <span class="text-2xl">âš¡</span>
            <h4 class="font-semibold text-sm">ç´¢å¼•ä¼˜åŒ–</h4>
          </div>
          <ul class="space-y-1.5 text-xs text-neutral-300">
            <li>â€¢ HNSWå›¾ç´¢å¼•ï¼Œæ£€ç´¢<10ms</li>
            <li>â€¢ IVF_FLATé¢„è¿‡æ»¤</li>
            <li>â€¢ åˆ†åŒºå­˜å‚¨ï¼ŒæŒ‰æ—¶é—´/ç±»å‹</li>
            <li>â€¢ å®šæœŸç´¢å¼•é‡å»º</li>
          </ul>
        </div>

        <div class="bg-gradient-to-br from-secondary-500/10 to-secondary-600/10 rounded-lg p-4 border border-secondary-500/20">
          <div class="flex items-center gap-2 mb-3">
            <span class="text-2xl">ğŸ’¾</span>
            <h4 class="font-semibold text-sm">ç¼“å­˜ç­–ç•¥</h4>
          </div>
          <ul class="space-y-1.5 text-xs text-neutral-300">
            <li>â€¢ Redisç¼“å­˜çƒ­é—¨æŸ¥è¯¢</li>
            <li>â€¢ å‘é‡ç»“æœç¼“å­˜1å°æ—¶</li>
            <li>â€¢ å…ƒæ•°æ®ç¼“å­˜24å°æ—¶</li>
            <li>â€¢ LRUæ·˜æ±°ç­–ç•¥</li>
          </ul>
        </div>

        <div class="bg-gradient-to-br from-accent-500/10 to-accent-600/10 rounded-lg p-4 border border-accent-500/20">
          <div class="flex items-center gap-2 mb-3">
            <span class="text-2xl">ğŸ”„</span>
            <h4 class="font-semibold text-sm">æ•°æ®åŒæ­¥</h4>
          </div>
          <ul class="space-y-1.5 text-xs text-neutral-300">
            <li>â€¢ äº‹ä»¶é©±åŠ¨æ›´æ–°</li>
            <li>â€¢ æœ€ç»ˆä¸€è‡´æ€§ä¿è¯</li>
            <li>â€¢ æ‰¹é‡å†™å…¥ä¼˜åŒ–</li>
            <li>â€¢ å®šæœŸä¸€è‡´æ€§æ£€æŸ¥</li>
          </ul>
        </div>
      </div>

      <!-- æŠ€æœ¯æ ˆ -->
      <div class="bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-lg p-4 border border-blue-500/20">
        <div class="flex items-start gap-3">
          <div class="text-2xl">ğŸ› ï¸</div>
          <div class="flex-1">
            <h4 class="font-semibold text-sm mb-3">å®Œæ•´æŠ€æœ¯æ ˆ</h4>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
              <div>
                <div class="text-xs text-neutral-400 mb-1">å‘é‡æ•°æ®åº“</div>
                <AppBadge size="sm">Milvus 2.3</AppBadge>
              </div>
              <div>
                <div class="text-xs text-neutral-400 mb-1">å…ƒæ•°æ®åº“</div>
                <AppBadge size="sm">PostgreSQL 15</AppBadge>
              </div>
              <div>
                <div class="text-xs text-neutral-400 mb-1">å¯¹è±¡å­˜å‚¨</div>
                <AppBadge size="sm">MinIO / S3</AppBadge>
              </div>
              <div>
                <div class="text-xs text-neutral-400 mb-1">ç¼“å­˜</div>
                <AppBadge size="sm">Redis 7</AppBadge>
              </div>
              <div>
                <div class="text-xs text-neutral-400 mb-1">æ¶ˆæ¯é˜Ÿåˆ—</div>
                <AppBadge size="sm">Kafka</AppBadge>
              </div>
              <div>
                <div class="text-xs text-neutral-400 mb-1">ä»»åŠ¡è°ƒåº¦</div>
                <AppBadge size="sm">Celery</AppBadge>
              </div>
              <div>
                <div class="text-xs text-neutral-400 mb-1">åˆ†å¸ƒå¼è®¡ç®—</div>
                <AppBadge size="sm">Ray 2.7</AppBadge>
              </div>
              <div>
                <div class="text-xs text-neutral-400 mb-1">ç›‘æ§</div>
                <AppBadge size="sm">Prometheus</AppBadge>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </AppCard>
</template>

<script setup lang="ts">
import AppCard from '@/components/atoms/AppCard.vue'
import AppBadge from '@/components/atoms/AppBadge.vue'
</script>

