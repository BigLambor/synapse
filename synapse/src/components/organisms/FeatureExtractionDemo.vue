<template>
  <AppCard variant="elevated">
    <template #header>
      <div class="flex items-center justify-between">
        <div>
          <h2 class="text-xl font-semibold mb-1">ğŸ§¬ å¤šæ¨¡æ€ç‰¹å¾æå–</h2>
          <p class="text-sm text-neutral-400">ä¸åŒæ•°æ®ç±»å‹çš„AIç‰¹å¾æå–æ–¹æ³•</p>
        </div>
        <div class="flex gap-2">
          <AppButton
            v-for="type in dataTypes"
            :key="type.id"
            size="sm"
            :variant="selectedType === type.id ? 'primary' : 'ghost'"
            @click="selectedType = type.id"
          >
            {{ type.icon }} {{ type.label }}
          </AppButton>
        </div>
      </div>
    </template>

    <div class="space-y-6">
      <!-- æ•°æ®ç±»å‹å±•ç¤º -->
      <div class="grid grid-cols-2 gap-6">
        <!-- å·¦ä¾§ï¼šè¾“å…¥ç¤ºä¾‹ -->
        <div>
          <h3 class="text-sm font-semibold mb-3 flex items-center gap-2">
            <span>ğŸ“¥</span>
            <span>è¾“å…¥æ•°æ®</span>
          </h3>
          <div class="bg-neutral-900/50 rounded-lg p-4 border border-neutral-800">
            <div v-if="selectedType === 'document'" class="space-y-3">
              <div class="flex items-start gap-3">
                <div class="text-2xl">ğŸ“„</div>
                <div class="flex-1">
                  <div class="font-medium text-sm mb-2">äº§å“éœ€æ±‚æ–‡æ¡£.pdf</div>
                  <div class="text-xs text-neutral-400 leading-relaxed">
                    "æœ¬äº§å“æ—¨åœ¨é€šè¿‡AIæŠ€æœ¯å®ç°å¤šæ¨¡æ€æ•°æ®çš„æ™ºèƒ½æ£€ç´¢å’Œåˆ†æã€‚ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š
                    1. æ”¯æŒæ–‡æ¡£ã€å›¾ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘ç­‰å¤šç§æ ¼å¼
                    2. è‡ªåŠ¨æå–ç‰¹å¾å‘é‡å¹¶å»ºç«‹ç´¢å¼•
                    3. åŸºäºè¯­ä¹‰çš„ç›¸ä¼¼åº¦æœç´¢..."
                  </div>
                  <div class="mt-3 flex gap-2">
                    <AppBadge size="sm" variant="info">PDFæ ¼å¼</AppBadge>
                    <AppBadge size="sm" variant="info">15é¡µ</AppBadge>
                    <AppBadge size="sm" variant="info">2.3MB</AppBadge>
                  </div>
                </div>
              </div>
            </div>

            <div v-else-if="selectedType === 'image'" class="space-y-3">
              <div class="flex items-start gap-3">
                <div class="text-2xl">ğŸ–¼ï¸</div>
                <div class="flex-1">
                  <div class="font-medium text-sm mb-2">äº§å“æ¶æ„å›¾.png</div>
                  <div class="w-full h-32 bg-gradient-to-br from-blue-500/20 to-purple-500/20 rounded border border-neutral-700 flex items-center justify-center text-xs text-neutral-400">
                    [æ¶æ„å›¾é¢„è§ˆ]<br/>åŒ…å«ï¼šå‰ç«¯å±‚ã€APIå±‚ã€å¤„ç†å±‚ã€å­˜å‚¨å±‚
                  </div>
                  <div class="mt-3 flex gap-2">
                    <AppBadge size="sm" variant="info">PNGæ ¼å¼</AppBadge>
                    <AppBadge size="sm" variant="info">1920x1080</AppBadge>
                    <AppBadge size="sm" variant="info">850KB</AppBadge>
                  </div>
                </div>
              </div>
            </div>

            <div v-else-if="selectedType === 'audio'" class="space-y-3">
              <div class="flex items-start gap-3">
                <div class="text-2xl">ğŸµ</div>
                <div class="flex-1">
                  <div class="font-medium text-sm mb-2">äº§å“ä¼šè®®å½•éŸ³.mp3</div>
                  <div class="w-full p-3 bg-neutral-800/50 rounded border border-neutral-700">
                    <div class="flex items-center gap-3 mb-2">
                      <div class="w-8 h-8 rounded-full bg-primary-500/20 flex items-center justify-center text-primary-400">â–¶</div>
                      <div class="flex-1 h-1 bg-neutral-700 rounded-full overflow-hidden">
                        <div class="h-full w-1/3 bg-primary-500"></div>
                      </div>
                      <span class="text-xs text-neutral-400">05:32</span>
                    </div>
                    <div class="text-xs text-neutral-400">
                      "å¤§å®¶å¥½ï¼Œä»Šå¤©æˆ‘ä»¬è®¨è®ºä¸€ä¸‹æ–°ç‰ˆæœ¬çš„æ ¸å¿ƒåŠŸèƒ½..."
                    </div>
                  </div>
                  <div class="mt-3 flex gap-2">
                    <AppBadge size="sm" variant="info">MP3æ ¼å¼</AppBadge>
                    <AppBadge size="sm" variant="info">15:32</AppBadge>
                    <AppBadge size="sm" variant="info">5.2MB</AppBadge>
                  </div>
                </div>
              </div>
            </div>

            <div v-else-if="selectedType === 'video'" class="space-y-3">
              <div class="flex items-start gap-3">
                <div class="text-2xl">ğŸ¬</div>
                <div class="flex-1">
                  <div class="font-medium text-sm mb-2">äº§å“æ¼”ç¤ºè§†é¢‘.mp4</div>
                  <div class="w-full h-32 bg-gradient-to-br from-pink-500/20 to-orange-500/20 rounded border border-neutral-700 flex items-center justify-center">
                    <div class="text-center">
                      <div class="text-3xl mb-2">â–¶ï¸</div>
                      <div class="text-xs text-neutral-400">è§†é¢‘é¢„è§ˆ</div>
                    </div>
                  </div>
                  <div class="mt-3 flex gap-2">
                    <AppBadge size="sm" variant="info">MP4æ ¼å¼</AppBadge>
                    <AppBadge size="sm" variant="info">1080p</AppBadge>
                    <AppBadge size="sm" variant="info">8:45</AppBadge>
                    <AppBadge size="sm" variant="info">125MB</AppBadge>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- å³ä¾§ï¼šæå–çš„ç‰¹å¾ -->
        <div>
          <h3 class="text-sm font-semibold mb-3 flex items-center gap-2">
            <span>ğŸ“Š</span>
            <span>æå–ç‰¹å¾</span>
          </h3>
          <div class="bg-neutral-900/50 rounded-lg p-4 border border-neutral-800 space-y-4">
            <!-- ç‰¹å¾å‘é‡ -->
            <div>
              <div class="text-xs font-medium text-neutral-400 mb-2">ç‰¹å¾å‘é‡ (768ç»´)</div>
              <div class="bg-neutral-800/50 rounded p-3 font-mono text-xs text-neutral-300 max-h-24 overflow-y-auto">
                [{{ currentFeatures.vector.slice(0, 8).map(v => v.toFixed(4)).join(', ') }}, ..., 
                {{ currentFeatures.vector.slice(-4).map(v => v.toFixed(4)).join(', ') }}]
              </div>
              <div class="mt-2 text-xs text-neutral-500">
                ä½¿ç”¨ {{ currentFeatures.model }} æ¨¡å‹æå–
              </div>
            </div>

            <!-- è¯­ä¹‰æ ‡ç­¾ -->
            <div>
              <div class="text-xs font-medium text-neutral-400 mb-2">è¯­ä¹‰æ ‡ç­¾</div>
              <div class="flex flex-wrap gap-2">
                <AppBadge
                  v-for="tag in currentFeatures.tags"
                  :key="tag"
                  size="sm"
                  variant="success"
                >
                  {{ tag }}
                </AppBadge>
              </div>
            </div>

            <!-- å…³é”®å®ä½“ -->
            <div>
              <div class="text-xs font-medium text-neutral-400 mb-2">å…³é”®å®ä½“</div>
              <div class="space-y-2">
                <div
                  v-for="entity in currentFeatures.entities"
                  :key="entity.name"
                  class="flex items-center justify-between text-xs"
                >
                  <span class="text-neutral-300">{{ entity.name }}</span>
                  <AppBadge size="sm">{{ entity.type }}</AppBadge>
                </div>
              </div>
            </div>

            <!-- ç½®ä¿¡åº¦ -->
            <div>
              <div class="text-xs font-medium text-neutral-400 mb-2">æå–ç½®ä¿¡åº¦</div>
              <div class="flex items-center gap-2">
                <AppProgress
                  :value="currentFeatures.confidence"
                  size="sm"
                  variant="success"
                  :show-label="false"
                />
                <span class="text-sm font-semibold text-green-400">
                  {{ currentFeatures.confidence }}%
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- æŠ€æœ¯è¯´æ˜ -->
      <div class="bg-gradient-to-r from-primary-500/10 to-secondary-500/10 rounded-lg p-4 border border-primary-500/20">
        <div class="flex items-start gap-3">
          <div class="text-2xl">ğŸ’¡</div>
          <div class="flex-1 space-y-2">
            <h4 class="font-semibold text-sm">{{ currentFeatures.technique.title }}</h4>
            <p class="text-xs text-neutral-300 leading-relaxed">
              {{ currentFeatures.technique.description }}
            </p>
            <div class="flex gap-2">
              <AppBadge
                v-for="tech in currentFeatures.technique.tech"
                :key="tech"
                size="sm"
                variant="info"
              >
                {{ tech }}
              </AppBadge>
            </div>
          </div>
        </div>
      </div>
    </div>
  </AppCard>
</template>

<script setup lang="ts">
import { ref, computed } from 'vue'
import AppCard from '@/components/atoms/AppCard.vue'
import AppButton from '@/components/atoms/AppButton.vue'
import AppBadge from '@/components/atoms/AppBadge.vue'
import AppProgress from '@/components/atoms/AppProgress.vue'

const dataTypes = [
  { id: 'document', label: 'æ–‡æ¡£', icon: 'ğŸ“„' },
  { id: 'image', label: 'å›¾ç‰‡', icon: 'ğŸ–¼ï¸' },
  { id: 'audio', label: 'éŸ³é¢‘', icon: 'ğŸµ' },
  { id: 'video', label: 'è§†é¢‘', icon: 'ğŸ¬' }
]

const selectedType = ref<string>('document')

// æ¨¡æ‹Ÿä¸åŒç±»å‹çš„ç‰¹å¾æ•°æ®
const featuresMap = {
  document: {
    vector: Array.from({ length: 768 }, () => Math.random() * 2 - 1),
    model: 'BERT-base-chinese',
    tags: ['äº§å“æ–‡æ¡£', 'AIæŠ€æœ¯', 'å¤šæ¨¡æ€', 'éœ€æ±‚åˆ†æ', 'åŠŸèƒ½è®¾è®¡'],
    entities: [
      { name: 'AIæŠ€æœ¯', type: 'æŠ€æœ¯' },
      { name: 'å¤šæ¨¡æ€æ•°æ®', type: 'æ¦‚å¿µ' },
      { name: 'è¯­ä¹‰æœç´¢', type: 'åŠŸèƒ½' },
      { name: 'å‘é‡ç´¢å¼•', type: 'æŠ€æœ¯' }
    ],
    confidence: 96.8,
    technique: {
      title: 'æ–‡æ¡£ç‰¹å¾æå–æŠ€æœ¯',
      description: 'ä½¿ç”¨BERTé¢„è®­ç»ƒæ¨¡å‹å¯¹æ–‡æœ¬è¿›è¡Œç¼–ç ï¼Œç”Ÿæˆ768ç»´çš„è¯­ä¹‰å‘é‡è¡¨ç¤ºã€‚é€šè¿‡Transformeræ¶æ„æ•æ‰ä¸Šä¸‹æ–‡å…³ç³»ï¼Œå®ç°æ·±å±‚è¯­ä¹‰ç†è§£ã€‚åŒæ—¶ä½¿ç”¨NERæ¨¡å‹è¯†åˆ«å…³é”®å®ä½“ï¼Œæå–ç»“æ„åŒ–ä¿¡æ¯ã€‚',
      tech: ['BERT', 'Transformer', 'NER', 'Word2Vec']
    }
  },
  image: {
    vector: Array.from({ length: 768 }, () => Math.random() * 2 - 1),
    model: 'ResNet-50 + CLIP',
    tags: ['æ¶æ„å›¾', 'æŠ€æœ¯æ–‡æ¡£', 'ç³»ç»Ÿè®¾è®¡', 'åˆ†å±‚æ¶æ„', 'å¯è§†åŒ–'],
    entities: [
      { name: 'å‰ç«¯å±‚', type: 'æ¨¡å—' },
      { name: 'APIå±‚', type: 'æ¨¡å—' },
      { name: 'å¤„ç†å±‚', type: 'æ¨¡å—' },
      { name: 'å­˜å‚¨å±‚', type: 'æ¨¡å—' }
    ],
    confidence: 94.2,
    technique: {
      title: 'å›¾åƒç‰¹å¾æå–æŠ€æœ¯',
      description: 'ä½¿ç”¨ResNet-50æå–è§†è§‰ç‰¹å¾ï¼ŒCLIPæ¨¡å‹å®ç°å›¾æ–‡è”åˆç¼–ç ã€‚é€šè¿‡å·ç§¯ç¥ç»ç½‘ç»œæ•æ‰å›¾åƒçš„å±‚æ¬¡åŒ–ç‰¹å¾ï¼Œä»è¾¹ç¼˜åˆ°çº¹ç†å†åˆ°è¯­ä¹‰å¯¹è±¡ã€‚OCRæŠ€æœ¯è¯†åˆ«å›¾ä¸­æ–‡å­—ï¼Œç›®æ ‡æ£€æµ‹è¯†åˆ«å…³é”®å…ƒç´ ã€‚',
      tech: ['ResNet-50', 'CLIP', 'CNN', 'OCR', 'YOLO']
    }
  },
  audio: {
    vector: Array.from({ length: 768 }, () => Math.random() * 2 - 1),
    model: 'Whisper + Wav2Vec2',
    tags: ['ä¼šè®®å½•éŸ³', 'äº§å“è®¨è®º', 'éœ€æ±‚è¯„å®¡', 'å›¢é˜Ÿåä½œ', 'è¯­éŸ³è½¬æ–‡æœ¬'],
    entities: [
      { name: 'æ–°ç‰ˆæœ¬', type: 'ç‰ˆæœ¬' },
      { name: 'æ ¸å¿ƒåŠŸèƒ½', type: 'åŠŸèƒ½' },
      { name: 'äº§å“ç»ç†', type: 'è§’è‰²' },
      { name: 'æŠ€æœ¯æ–¹æ¡ˆ', type: 'æ–‡æ¡£' }
    ],
    confidence: 92.5,
    technique: {
      title: 'éŸ³é¢‘ç‰¹å¾æå–æŠ€æœ¯',
      description: 'é¦–å…ˆä½¿ç”¨Whisperæ¨¡å‹è¿›è¡Œé«˜ç²¾åº¦è¯­éŸ³è½¬æ–‡æœ¬(ASR)ï¼Œç„¶åå¯¹è½¬å½•æ–‡æœ¬ä½¿ç”¨BERTæå–è¯­ä¹‰ç‰¹å¾ã€‚Wav2Vec2ç›´æ¥ä»éŸ³é¢‘æ³¢å½¢å­¦ä¹ è¡¨ç¤ºï¼Œæ•æ‰è¯´è¯äººç‰¹å¾ã€æƒ…æ„Ÿã€è¯­è°ƒç­‰å‰¯è¯­è¨€ä¿¡æ¯ã€‚',
      tech: ['Whisper', 'Wav2Vec2', 'ASR', 'MFCC', 'Speaker Embedding']
    }
  },
  video: {
    vector: Array.from({ length: 768 }, () => Math.random() * 2 - 1),
    model: 'VideoMAE + CLIP',
    tags: ['äº§å“æ¼”ç¤º', 'åŠŸèƒ½å±•ç¤º', 'ç”¨æˆ·ç•Œé¢', 'äº¤äº’æµç¨‹', 'è§†è§‰è®¾è®¡'],
    entities: [
      { name: 'ç™»å½•ç•Œé¢', type: 'ç•Œé¢' },
      { name: 'æ•°æ®çœ‹æ¿', type: 'åŠŸèƒ½' },
      { name: 'æœç´¢åŠŸèƒ½', type: 'åŠŸèƒ½' },
      { name: 'å¯è§†åŒ–å›¾è¡¨', type: 'ç»„ä»¶' }
    ],
    confidence: 89.7,
    technique: {
      title: 'è§†é¢‘ç‰¹å¾æå–æŠ€æœ¯',
      description: 'é‡‡ç”¨å¤šæ¨¡æ€èåˆç­–ç•¥ï¼šVideoMAEæå–æ—¶åºè§†è§‰ç‰¹å¾ï¼ŒCLIPè¿›è¡Œè§†é¢‘-æ–‡æœ¬è”åˆç¼–ç ã€‚å…³é”®å¸§æå–ç®—æ³•è¯†åˆ«é‡è¦åœºæ™¯ï¼Œç›®æ ‡è·Ÿè¸ªç®—æ³•è¿½è¸ªä¸»è¦å¯¹è±¡ã€‚éŸ³é¢‘è½¨é“ä½¿ç”¨ASRè½¬å½•ï¼Œä¸è§†è§‰ç‰¹å¾èåˆã€‚',
      tech: ['VideoMAE', 'CLIP', 'I3D', 'å…³é”®å¸§æå–', 'Multi-modal Fusion']
    }
  }
}

const currentFeatures = computed(() => featuresMap[selectedType.value as keyof typeof featuresMap])
</script>

